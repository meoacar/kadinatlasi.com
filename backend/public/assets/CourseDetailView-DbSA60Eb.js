import{f as e,r as s,g as a,b as l,i as n,e as t,t as i,l as r,u as c,w as o,K as u,G as d,v,m as p,o as m}from"./vendor-By8KxUP1.js";import{u as y,a as k,_ as b}from"./index-5thJkCkA.js";const h={class:"course-detail-page"},g={key:0,class:"loading-state"},f={key:1,class:"course-container"},_={class:"course-header"},w={class:"container"},K={class:"course-info"},$={class:"course-meta"},z={class:"category"},x={class:"level"},C={class:"course-title"},A={class:"course-description"},B={class:"course-stats"},G={class:"stat"},H={class:"stat"},L={class:"stat"},M={key:0,class:"stat"},O={class:"enrollment-section"},Y={key:0,class:"enrolled-badge"},j=["disabled"],D={class:"course-image"},T=["src","alt"],V={key:0,class:"course-content"},q={class:"container"},E={class:"content-body"},I={key:0,class:"video-section"},N={class:"video-container"},P=["src"],R={key:1,class:"text-content"},F=["innerHTML"],J={key:2,class:"no-content"},Q={key:1,class:"access-denied"},S={class:"container"},U={class:"denied-card"},W=["disabled"],X=b(e({__name:"CourseDetailView",setup(e){const b=u(),X=d(),Z=y(),ee=s(null),se=s(!0),ae=s(!1),le=s(!1),ne=async()=>{try{const e=b.params.id,s=await k.get(`/courses/${e}`);s.data.success&&(ee.value=s.data.course,le.value=s.data.is_enrolled)}catch(e){console.error("Course loading error:",e),X.push("/courses")}finally{se.value=!1}},te=async()=>{if(Z.isAuthenticated){ae.value=!0;try{(await k.post(`/courses/${ee.value.id}/enroll`)).data.success&&(alert("Kursa başarıyla kaydoldunuz!"),await ne())}catch(e){console.error("Enrollment error:",e);const s=e.response?.data;if(s?.requires_premium){confirm(s.message+"\n\nPremium üyeliğe yükseltmek ister misiniz?")&&X.push("/premium")}else{alert(s?.message||"Kayıt işlemi sırasında bir hata oluştu!")}}finally{ae.value=!1}}else X.push("/login")},ie=e=>{const s=Math.floor(e/60),a=e%60;return s>0?`${s}s ${a}dk`:`${a} dakika`},re=e=>{if(!e)return"";if(e.includes("youtube.com/watch?v=")){const s=e.split("v=")[1]?.split("&")[0];return`https://www.youtube.com/embed/${s}`}if(e.includes("youtu.be/")){const s=e.split("youtu.be/")[1]?.split("?")[0];return`https://www.youtube.com/embed/${s}`}if(e.includes("vimeo.com/")){const s=e.split("vimeo.com/")[1]?.split("?")[0];return`https://player.vimeo.com/video/${s}`}return e.includes("/embed/")||e.includes("player.vimeo.com"),e};return a(()=>{ne()}),(e,s)=>{const a=v("RouterLink");return m(),l("div",h,[se.value?(m(),l("div",g,s[0]||(s[0]=[t("div",{class:"spinner"},null,-1),t("p",null,"Kurs yükleniyor...",-1)]))):ee.value?(m(),l("div",f,[t("section",_,[t("div",w,[t("div",K,[t("div",$,[t("span",z,i(ee.value.category),1),t("span",x,i((u=ee.value.level,{beginner:"Başlangıç",intermediate:"Orta",advanced:"İleri"}[u]||u)),1)]),t("h1",C,i(ee.value.title),1),t("p",A,i(ee.value.description),1),t("div",B,[t("div",G,[s[1]||(s[1]=t("span",{class:"stat-icon"},"👩🏫",-1)),t("span",null,i(ee.value.instructor_name),1)]),t("div",H,[s[2]||(s[2]=t("span",{class:"stat-icon"},"⏱️",-1)),t("span",null,i(ie(ee.value.duration)),1)]),t("div",L,[s[3]||(s[3]=t("span",{class:"stat-icon"},"👥",-1)),t("span",null,i(ee.value.enrollment_count)+" kayıt",1)]),ee.value.rating>0?(m(),l("div",M,[s[4]||(s[4]=t("span",{class:"stat-icon"},"⭐",-1)),t("span",null,i(ee.value.rating),1)])):n("",!0)]),t("div",O,[le.value?(m(),l("div",Y,s[5]||(s[5]=[t("span",{class:"badge-icon"},"✅",-1),t("span",null,"Kursa Kayıtlısınız",-1)]))):c(Z).isAuthenticated?(m(),l("button",{key:1,onClick:te,class:"enroll-btn",disabled:ae.value},i(ae.value?"İşleniyor...":`₺${ee.value.price} - Kayıt Ol`),9,j)):(m(),r(a,{key:2,to:"/login",class:"login-btn"},{default:o(()=>s[6]||(s[6]=[p(" Giriş Yapın ",-1)])),_:1,__:[6]}))])]),t("div",D,[t("img",{src:ee.value.image_url||"https://via.placeholder.com/500x300",alt:ee.value.title},null,8,T)])])]),le.value?(m(),l("section",V,[t("div",q,[s[10]||(s[10]=t("div",{class:"content-header"},[t("h2",null,"📚 Kurs İçeriği")],-1)),t("div",E,[ee.value.video_url?(m(),l("div",I,[s[7]||(s[7]=t("h3",null,"🎥 Video İçerik",-1)),t("div",N,[t("iframe",{src:re(ee.value.video_url),frameborder:"0",allowfullscreen:"",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",class:"course-video"},null,8,P)])])):n("",!0),ee.value.content?(m(),l("div",R,[s[8]||(s[8]=t("h3",null,"📖 Ders Notları",-1)),t("div",{class:"content-text",innerHTML:ee.value.content},null,8,F)])):n("",!0),ee.value.content||ee.value.video_url?n("",!0):(m(),l("div",J,s[9]||(s[9]=[t("div",{class:"no-content-icon"},"📝",-1),t("h3",null,"İçerik Hazırlanıyor",-1),t("p",null,"Bu kursun içeriği henüz hazırlanmaktadır. Yakında eklenecektir.",-1)])))])])])):le.value?n("",!0):(m(),l("section",Q,[t("div",S,[t("div",U,[s[12]||(s[12]=t("div",{class:"denied-icon"},"🔒",-1)),s[13]||(s[13]=t("h3",null,"İçerik Kilitli",-1)),s[14]||(s[14]=t("p",null,"Bu kursun içeriğini görmek için kursa kayıt olmanız gerekir.",-1)),c(Z).isAuthenticated?(m(),l("button",{key:0,onClick:te,class:"unlock-btn",disabled:ae.value},i(ae.value?"İşleniyor...":"Kursa Kayıt Ol"),9,W)):(m(),r(a,{key:1,to:"/login",class:"unlock-btn"},{default:o(()=>s[11]||(s[11]=[p(" Giriş Yapın ",-1)])),_:1,__:[11]}))])])]))])):n("",!0)]);var u}}}),[["__scopeId","data-v-12790256"]]);export{X as default};
