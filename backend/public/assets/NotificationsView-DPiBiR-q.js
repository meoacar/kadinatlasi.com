import{c as e,n as t}from"./index-4FVvSVHG.js";import{f as a,r as i,c as r,g as s,b as n,e as l,i as o,t as d,u as c,n as u,F as m,j as g,o as y}from"./vendor-CP_mu_zf.js";const x={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},f={class:"bg-white rounded-lg shadow-md"},p={class:"px-6 py-4 border-b border-gray-200"},b={class:"flex items-center justify-between"},v={class:"flex items-center space-x-4"},k={class:"text-sm text-gray-500"},h={class:"px-6 py-4 border-b border-gray-200"},w={class:"flex flex-wrap gap-2"},_={class:"divide-y divide-gray-200"},C={key:0,class:"p-8 text-center"},N={key:1,class:"p-8 text-center"},z={class:"text-gray-500"},j=["onClick"],O={class:"flex items-start space-x-4"},T={class:"text-3xl"},$={class:"flex-1 min-w-0"},B={class:"flex items-center justify-between"},D={class:"text-lg font-medium text-gray-900"},H={class:"flex items-center space-x-2"},R={class:"text-sm text-gray-500"},A={key:0,class:"w-3 h-3 bg-blue-500 rounded-full"},F={class:"text-gray-600 mt-1"},M={key:0,class:"mt-2"},Y={key:0,class:"px-6 py-4 border-t border-gray-200 text-center"},S=a({__name:"NotificationsView",setup(a){const S=e(),E=i("all"),I=r(()=>{switch(E.value){case"unread":return S.unreadNotifications;case"read":return S.readNotifications;default:return S.notifications}}),L=async()=>{await S.markAllAsRead()},V=()=>{S.fetchNotifications(S.notifications.length+20)},q=e=>t.getNotificationColor(e),G=e=>({forum_reply:"Forum Yanıtı",blog_comment:"Blog Yorumu",menstrual_reminder:"Regl Hatırlatması",water_reminder:"Su Hatırlatması",exercise_reminder:"Egzersiz Hatırlatması"}[e]||"Bildirim"),J=()=>{switch(E.value){case"unread":return"Okunmamış bildiriminiz yok";case"read":return"Okunmuş bildiriminiz yok";default:return"Henüz bildiriminiz yok"}},K=e=>{const t=new Date(e),a=new Date,i=Math.floor((a.getTime()-t.getTime())/6e4);return i<1?"Şimdi":i<60?`${i} dakika önce`:i<1440?`${Math.floor(i/60)} saat önce`:i<10080?`${Math.floor(i/1440)} gün önce`:t.toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})};return s(()=>{S.init()}),(e,a)=>(y(),n("div",x,[l("div",f,[l("div",p,[l("div",b,[a[3]||(a[3]=l("h1",{class:"text-2xl font-bold text-gray-900"},"Bildirimler",-1)),l("div",v,[l("span",k,d(c(S).unreadCount)+" okunmamış ",1),c(S).unreadCount>0?(y(),n("button",{key:0,onClick:L,class:"btn-secondary text-sm"}," Tümünü Okundu İşaretle ")):o("",!0)])])]),l("div",h,[l("div",w,[l("button",{onClick:a[0]||(a[0]=e=>E.value="all"),class:u(["px-4 py-2 rounded-full text-sm font-medium transition-colors","all"===E.value?"bg-primary-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Tümü ("+d(c(S).notifications.length)+") ",3),l("button",{onClick:a[1]||(a[1]=e=>E.value="unread"),class:u(["px-4 py-2 rounded-full text-sm font-medium transition-colors","unread"===E.value?"bg-primary-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Okunmamış ("+d(c(S).unreadNotifications.length)+") ",3),l("button",{onClick:a[2]||(a[2]=e=>E.value="read"),class:u(["px-4 py-2 rounded-full text-sm font-medium transition-colors","read"===E.value?"bg-primary-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Okunmuş ("+d(c(S).readNotifications.length)+") ",3)])]),l("div",_,[c(S).loading?(y(),n("div",C,a[4]||(a[4]=[l("div",{class:"text-gray-500"},"Bildirimler yükleniyor...",-1)]))):0===I.value.length?(y(),n("div",N,[l("div",z,d(J()),1)])):o("",!0),(y(!0),n(m,null,g(I.value,e=>{return y(),n("div",{key:e.id,onClick:t=>(async e=>{e.read_at||await S.markAsRead(e.id),e.data&&("forum_reply"===e.type&&e.data.topic_id?window.location.href=`/forum/konu/${e.data.topic_id}`:"blog_comment"===e.type&&e.data.blog_id&&(window.location.href=`/blog/${e.data.blog_id}`))})(e),class:u(["px-6 py-4 cursor-pointer hover:bg-gray-50 transition-colors",e.read_at?"":"bg-blue-50"])},[l("div",O,[l("div",T,d((a=e.type,t.getNotificationIcon(a))),1),l("div",$,[l("div",B,[l("h3",D,d(e.title),1),l("div",H,[l("span",R,d(K(e.created_at)),1),e.read_at?o("",!0):(y(),n("div",A))])]),l("p",F,d(e.message),1),e.data?(y(),n("div",M,[l("span",{class:u([q(e.type),"text-sm font-medium"])},d(G(e.type)),3)])):o("",!0)])])],10,j);var a}),128))]),!c(S).loading&&I.value.length>0?(y(),n("div",Y,[l("button",{onClick:V,class:"btn-secondary"}," Daha Fazla Yükle ")])):o("",!0)])]))}});export{S as default};
