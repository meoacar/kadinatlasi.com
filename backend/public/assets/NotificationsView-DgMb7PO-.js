import{d as e,r as t,c as a,g as r,b as i,e as n,i as o,t as s,u as l,s as d,F as c,k as u,o as f}from"./vendor-By8KxUP1.js";import{a as p}from"./index-5thJkCkA.js";const g=new class{async getNotifications(e=20){try{const t=await p.get("/notifications",{params:{limit:e}});return t.data.success?t.data.data:[]}catch(t){return console.error("Get notifications error:",t),[]}}async getUnreadCount(){try{const e=await p.get("/notifications/unread-count");return e.data.success?e.data.data.count:0}catch(e){return console.error("Get unread count error:",e),0}}async markAsRead(e){try{return(await p.post(`/notifications/${e}/read`)).data.success}catch(t){return console.error("Mark as read error:",t),!1}}async markAllAsRead(){try{return(await p.post("/notifications/mark-all-read")).data.success}catch(e){return console.error("Mark all as read error:",e),!1}}getNotificationIcon(e){const t={forum_reply:"💬",blog_comment:"📝",menstrual_reminder:"🌸",water_reminder:"💧",exercise_reminder:"💪",default:"🔔"};return t[e]||t.default}getNotificationColor(e){const t={forum_reply:"text-blue-600",blog_comment:"text-green-600",menstrual_reminder:"text-pink-600",water_reminder:"text-blue-400",exercise_reminder:"text-orange-600",default:"text-gray-600"};return t[e]||t.default}},m=e("notification",()=>{const e=t([]),r=t(0),i=t(!1),n=a(()=>e.value.filter(e=>!e.read_at)),o=a(()=>e.value.filter(e=>e.read_at));async function s(t=20){i.value=!0;try{e.value=await g.getNotifications(t)}finally{i.value=!1}}async function l(){r.value=await g.getUnreadCount()}return{notifications:e,unreadCount:r,loading:i,unreadNotifications:n,readNotifications:o,fetchNotifications:s,fetchUnreadCount:l,markAsRead:async function(t){const a=await g.markAsRead(t);if(a){const a=e.value.find(e=>e.id===t);a&&!a.read_at&&(a.read_at=(new Date).toISOString(),r.value=Math.max(0,r.value-1))}return a},markAllAsRead:async function(){const t=await g.markAllAsRead();return t&&(e.value.forEach(e=>{e.read_at||(e.read_at=(new Date).toISOString())}),r.value=0),t},addNotification:function(t){e.value.unshift(t),t.read_at||r.value++},init:function(){s(),l()}}}),x={style:{"min-height":"100vh",background:"linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%)",padding:"32px 0"}},y={style:{"max-width":"800px",margin:"0 auto",padding:"0 16px"}},b={style:{background:"white","border-radius":"16px",padding:"24px","margin-bottom":"24px","box-shadow":"0 4px 20px rgba(236, 72, 153, 0.1)"}},h={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"16px"}},k={style:{display:"flex","align-items":"center",gap:"16px"}},v={style:{"font-size":"0.875rem",color:"#6b7280",background:"#f3f4f6",padding:"6px 12px","border-radius":"20px"}},w={style:{display:"flex",gap:"8px"}},_={key:0,style:{background:"white","border-radius":"16px",padding:"48px","text-align":"center"}},z={key:1,style:{background:"white","border-radius":"16px",padding:"48px","text-align":"center"}},C={style:{"font-size":"1.25rem","font-weight":"600",color:"#1f2937","margin-bottom":"8px"}},N={key:2,style:{display:"flex","flex-direction":"column",gap:"12px"}},R=["onClick"],A={style:{display:"flex","align-items":"start",gap:"16px"}},S={style:{"font-size":"2rem","flex-shrink":"0"}},O={style:{flex:"1","min-width":"0"}},D={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"8px"}},M={style:{"font-size":"1.125rem","font-weight":"600",color:"#1f2937",margin:"0"}},Y={style:{display:"flex","align-items":"center",gap:"8px"}},$={style:{"font-size":"0.75rem",color:"#6b7280","white-space":"nowrap"}},T={key:0,style:{width:"8px",height:"8px",background:"#ec4899","border-radius":"50%","flex-shrink":"0"}},j={style:{color:"#6b7280",margin:"0 0 12px 0","line-height":"1.5"}},B={key:0,style:{display:"inline-block",background:"rgba(236, 72, 153, 0.1)",color:"#ec4899",padding:"4px 12px","border-radius":"12px","font-size":"0.75rem","font-weight":"500"}},H={key:3,style:{"text-align":"center","margin-top":"24px"}},I={__name:"NotificationsView",setup(e){const p=m(),I=t("all"),F=a(()=>{switch(I.value){case"unread":return p.unreadNotifications;case"read":return p.readNotifications;default:return p.notifications}}),U=async()=>{await p.markAllAsRead()},W=()=>{p.fetchNotifications(p.notifications.length+20)},E=e=>({forum_reply:"Forum Yanıtı",blog_comment:"Blog Yorumu",menstrual_reminder:"Regl Hatırlatması",water_reminder:"Su Hatırlatması",exercise_reminder:"Egzersiz Hatırlatması"}[e]||"Bildirim"),G=()=>{switch(I.value){case"unread":return"Okunmamış bildiriminiz yok";case"read":return"Okunmuş bildiriminiz yok";default:return"Henüz bildiriminiz yok"}},L=e=>{const t=new Date(e),a=new Date,r=Math.floor((a.getTime()-t.getTime())/6e4);return r<1?"Şimdi":r<60?`${r}dk önce`:r<1440?`${Math.floor(r/60)}s önce`:r<10080?`${Math.floor(r/1440)}g önce`:t.toLocaleDateString("tr-TR")};return r(()=>{p.init()}),(e,t)=>(f(),i("div",x,[n("div",y,[n("div",b,[n("div",h,[t[3]||(t[3]=n("h1",{style:{"font-size":"2rem","font-weight":"bold",color:"#1f2937",margin:"0"}},"🔔 Bildirimler",-1)),n("div",k,[n("span",v,s(l(p).unreadCount)+" okunmamış ",1),l(p).unreadCount>0?(f(),i("button",{key:0,onClick:U,style:{background:"#ec4899",color:"white",padding:"8px 16px","border-radius":"8px","font-size":"0.875rem","font-weight":"500",border:"none",cursor:"pointer",transition:"all 0.2s ease"},onmouseover:"this.style.background='#db2777'",onmouseout:"this.style.background='#ec4899'"}," Tümünü Okundu İşaretle ")):o("",!0)])]),n("div",w,[n("button",{onClick:t[0]||(t[0]=e=>I.value="all"),style:d({padding:"8px 16px",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"500",border:"none",cursor:"pointer",transition:"all 0.2s ease",background:"all"===I.value?"#ec4899":"#f3f4f6",color:"all"===I.value?"white":"#374151"})}," Tümü ("+s(l(p).notifications.length)+") ",5),n("button",{onClick:t[1]||(t[1]=e=>I.value="unread"),style:d({padding:"8px 16px",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"500",border:"none",cursor:"pointer",transition:"all 0.2s ease",background:"unread"===I.value?"#ec4899":"#f3f4f6",color:"unread"===I.value?"white":"#374151"})}," Okunmamış ("+s(l(p).unreadNotifications.length)+") ",5),n("button",{onClick:t[2]||(t[2]=e=>I.value="read"),style:d({padding:"8px 16px",borderRadius:"20px",fontSize:"0.875rem",fontWeight:"500",border:"none",cursor:"pointer",transition:"all 0.2s ease",background:"read"===I.value?"#ec4899":"#f3f4f6",color:"read"===I.value?"white":"#374151"})}," Okunmuş ("+s(l(p).readNotifications.length)+") ",5)])]),l(p).loading?(f(),i("div",_,t[4]||(t[4]=[n("div",{style:{width:"48px",height:"48px",border:"4px solid #f3f4f6","border-top":"4px solid #ec4899","border-radius":"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}},null,-1),n("p",{style:{color:"#6b7280",margin:"0"}},"Bildirimler yükleniyor...",-1)]))):0===F.value.length?(f(),i("div",z,[t[5]||(t[5]=n("div",{style:{"font-size":"4rem","margin-bottom":"16px"}},"📭",-1)),n("h2",C,s(G()),1),t[6]||(t[6]=n("p",{style:{color:"#6b7280",margin:"0"}},"Yeni bildirimler geldiğinde burada görünecek.",-1))])):(f(),i("div",N,[(f(!0),i(c,null,u(F.value,e=>{return f(),i("div",{key:e.id,onClick:t=>(async e=>{e.read_at||await p.markAsRead(e.id),e.data&&("forum_reply"===e.type&&e.data.topic_id?window.location.href=`/forum/konu/${e.data.topic_id}`:"blog_comment"===e.type&&e.data.blog_id&&(window.location.href=`/blog/${e.data.blog_id}`))})(e),style:d({background:e.read_at?"white":"linear-gradient(135deg, #fef3f2 0%, #fdf2f8 100%)",borderRadius:"16px",padding:"20px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 10px rgba(236, 72, 153, 0.08)",border:e.read_at?"1px solid #f3f4f6":"1px solid rgba(236, 72, 153, 0.2)"}),onmouseover:"this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 20px rgba(236, 72, 153, 0.15)'",onmouseout:"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 10px rgba(236, 72, 153, 0.08)'"},[n("div",A,[n("div",S,s((t=e.type,g.getNotificationIcon(t))),1),n("div",O,[n("div",D,[n("h3",M,s(e.title),1),n("div",Y,[n("span",$,s(L(e.created_at)),1),e.read_at?o("",!0):(f(),i("div",T))])]),n("p",j,s(e.message),1),e.data?(f(),i("div",B,s(E(e.type)),1)):o("",!0)])])],12,R);var t}),128))])),!l(p).loading&&F.value.length>0?(f(),i("div",H,[n("button",{onClick:W,style:{background:"white",color:"#374151",padding:"12px 24px","border-radius":"12px","font-weight":"500",border:"1px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease"},onmouseover:"this.style.background='#f9fafb'; this.style.borderColor='#ec4899'",onmouseout:"this.style.background='white'; this.style.borderColor='#e5e7eb'"}," Daha Fazla Yükle ")])):o("",!0)])]))}};export{I as default};
