import{f as e,r as t,K as a,n as l,b as s,e as r,g as o,u as n,q as i,F as u,i as c,B as d,C as y,A as p,G as m,t as x,I as g,D as v,o as b}from"./vendor-j_7Nvy9R.js";import{u as f,b as h}from"./index-sds9fSD5.js";const k={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},w={class:"flex justify-between items-center mb-8"},_={class:"mb-6"},C={class:"flex flex-wrap gap-2"},K=["onClick"],j={class:"mb-6"},S={key:0,class:"text-center py-8"},U={key:1,class:"text-center py-8"},V={key:2,class:"space-y-4"},q=["onClick"],z={class:"flex items-start justify-between"},A={class:"flex-1"},D={class:"flex items-center gap-2 mb-2"},F={key:0,class:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full"},O={key:1,class:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full"},T={class:"text-lg font-semibold text-gray-900 mb-2"},Y={class:"text-gray-600 text-sm mb-3 line-clamp-2"},B={class:"flex items-center text-sm text-gray-500"},L={class:"flex items-center mr-4"},R={class:"w-6 h-6 bg-primary-100 rounded-full flex items-center justify-center mr-2"},$={class:"text-primary-600 font-medium text-xs"},G={class:"mr-4"},H={class:"text-right text-sm text-gray-500"},I={class:"mb-1"},P={key:0,class:"text-xs mt-1"},E={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},J={class:"bg-white rounded-lg p-6 w-full max-w-2xl mx-4"},M=["value"],N={class:"flex justify-end gap-3"},Q=["disabled"],W=e({__name:"ForumView",setup(e){const W=v(),X=f(),Z=t([]),ee=t([]),te=t(!1),ae=t(null),le=t(""),se=t(!1),re=t(!1),oe=t({title:"",content:"",category_id:""}),ne=async()=>{te.value=!0;try{const e=new URLSearchParams;ae.value&&e.append("category_id",ae.value.toString()),le.value&&e.append("search",le.value);const t=await h.get(`/forum/topics?${e}`);t.data.success&&(Z.value=t.data.data.data)}catch(e){console.error("Topics fetch error:",e)}finally{te.value=!1}},ie=async()=>{re.value=!0;try{(await h.post("/forum/topics",oe.value)).data.success&&(se.value=!1,oe.value={title:"",content:"",category_id:""},await ne())}catch(e){console.error("Create topic error:",e)}finally{re.value=!1}},ue=e=>new Date(e).toLocaleDateString("tr-TR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return a([ae,le],()=>{ne()},{deep:!0}),l(()=>{ne(),(async()=>{try{const e=await h.get("/categories");e.data.success&&(ee.value=e.data.data)}catch(e){console.error("Categories fetch error:",e)}})()}),(e,t)=>(b(),s("div",k,[r("div",w,[t[7]||(t[7]=r("h1",{class:"text-3xl font-display font-bold text-gray-900"},"Forum",-1)),n(X).isAuthenticated?(b(),s("button",{key:0,onClick:t[0]||(t[0]=e=>se.value=!0),class:"btn-primary"}," Yeni Konu AÃ§ ")):o("",!0)]),r("div",_,[r("div",C,[r("button",{onClick:t[1]||(t[1]=e=>ae.value=null),class:i(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",ae.value?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-primary-500 text-white"])}," TÃ¼mÃ¼ ",2),(b(!0),s(u,null,c(ee.value,e=>(b(),s("button",{key:e.id,onClick:t=>ae.value=e.id,class:i(["px-4 py-2 rounded-lg text-sm font-medium transition-colors",ae.value===e.id?"bg-primary-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},x(e.name),11,K))),128))])]),r("div",j,[d(r("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>le.value=e),type:"text",placeholder:"Konularda ara...",class:"w-full max-w-md px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"},null,512),[[y,le.value]])]),te.value?(b(),s("div",S,t[8]||(t[8]=[r("div",{class:"text-gray-500"},"YÃ¼kleniyor...",-1)]))):0===Z.value.length?(b(),s("div",U,t[9]||(t[9]=[r("div",{class:"text-gray-500"},"HenÃ¼z konu bulunmuyor.",-1)]))):(b(),s("div",V,[(b(!0),s(u,null,c(Z.value,e=>(b(),s("div",{key:e.id,class:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:t=>{return a=e.id,void W.push(`/forum/topic/${a}`);var a}},[r("div",z,[r("div",A,[r("div",D,[e.is_pinned?(b(),s("span",F," ðŸ“Œ SabitlenmiÅŸ ")):o("",!0),e.is_locked?(b(),s("span",O," ðŸ”’ Kilitli ")):o("",!0),r("span",{class:"px-2 py-1 text-xs rounded-full",style:g({backgroundColor:e.category?.color+"20",color:e.category?.color})},x(e.category?.name),5)]),r("h3",T,x(e.title),1),r("p",Y,x(e.content),1),r("div",B,[r("div",L,[r("div",R,[r("span",$,x(e.user?.name?.charAt(0)),1)]),r("span",null,x(e.user?.name),1)]),r("span",G,x(ue(e.created_at)),1)])]),r("div",H,[r("div",I,x(e.posts_count)+" yanÄ±t",1),r("div",null,x(e.views_count)+" gÃ¶rÃ¼ntÃ¼leme",1),e.last_post_at?(b(),s("div",P," Son: "+x(ue(e.last_post_at)),1)):o("",!0)])])],8,q))),128))])),se.value?(b(),s("div",E,[r("div",J,[t[14]||(t[14]=r("h2",{class:"text-xl font-bold mb-4"},"Yeni Konu OluÅŸtur",-1)),r("form",{onSubmit:p(ie,["prevent"]),class:"space-y-4"},[r("div",null,[t[11]||(t[11]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Kategori",-1)),d(r("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>oe.value.category_id=e),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"},[t[10]||(t[10]=r("option",{value:""},"Kategori seÃ§in",-1)),(b(!0),s(u,null,c(ee.value,e=>(b(),s("option",{key:e.id,value:e.id},x(e.name),9,M))),128))],512),[[m,oe.value.category_id]])]),r("div",null,[t[12]||(t[12]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"BaÅŸlÄ±k",-1)),d(r("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>oe.value.title=e),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Konu baÅŸlÄ±ÄŸÄ±"},null,512),[[y,oe.value.title]])]),r("div",null,[t[13]||(t[13]=r("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Ä°Ã§erik",-1)),d(r("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>oe.value.content=e),rows:"6",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",placeholder:"Konunuzu detaylÄ± olarak aÃ§Ä±klayÄ±n..."},null,512),[[y,oe.value.content]])]),r("div",N,[r("button",{type:"button",onClick:t[6]||(t[6]=e=>se.value=!1),class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Ä°ptal "),r("button",{type:"submit",disabled:re.value,class:"btn-primary disabled:opacity-50"},x(re.value?"OluÅŸturuluyor...":"Konu OluÅŸtur"),9,Q)])],32)])])):o("",!0)]))}});export{W as default};
