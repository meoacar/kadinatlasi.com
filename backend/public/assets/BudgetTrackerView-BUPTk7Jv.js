import{f as e,r as t,J as a,c as l,g as i,b as o,e as r,t as n,s as d,C as s,I as p,F as u,k as y,u as c,x as b,D as g,o as x}from"./vendor-By8KxUP1.js";import{a as m,_ as v}from"./index-5thJkCkA.js";const f={style:{"min-height":"100vh",background:"#f9fafb",padding:"32px 16px"}},h={style:{"max-width":"1400px",margin:"0 auto"}},w={style:{display:"grid","grid-template-columns":"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px","margin-bottom":"32px"}},k={style:{background:"linear-gradient(135deg, #10b981, #059669)",color:"white",padding:"24px","border-radius":"16px","box-shadow":"0 10px 25px rgba(16, 185, 129, 0.3)"}},z={style:{display:"flex","align-items":"center","justify-content":"between"}},_={style:{"font-size":"2rem","font-weight":"bold"}},T={style:{background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",padding:"24px","border-radius":"16px","box-shadow":"0 10px 25px rgba(239, 68, 68, 0.3)"}},D={style:{display:"flex","align-items":"center","justify-content":"between"}},C={style:{"font-size":"2rem","font-weight":"bold"}},K={style:{display:"flex","align-items":"center","justify-content":"between"}},j={style:{"font-size":"2rem","font-weight":"bold"}},V={style:{"font-size":"2.5rem"}},S={style:{display:"grid","grid-template-columns":"1fr 400px",gap:"32px","align-items":"start"}},U={style:{background:"white","border-radius":"16px","box-shadow":"0 10px 25px rgba(0,0,0,0.1)",padding:"32px"}},B={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"24px"}},F={style:{display:"flex",gap:"16px","margin-bottom":"24px"}},q=["value"],A=["value"],G={key:0,style:{display:"flex","flex-direction":"column",gap:"12px","max-height":"600px","overflow-y":"auto"}},I={style:{display:"flex","align-items":"center",gap:"12px"}},Y={style:{"font-size":"1.5rem"}},L={style:{"font-weight":"600",color:"#111827"}},M={style:{"font-size":"0.875rem",color:"#6b7280"}},O={style:{display:"flex","align-items":"center",gap:"12px"}},R=["onClick"],E={key:1,style:{"text-align":"center",padding:"48px",color:"#6b7280"}},N={style:{background:"white","border-radius":"16px","box-shadow":"0 10px 25px rgba(0,0,0,0.1)",padding:"32px"}},H={style:{"font-size":"1.25rem","font-weight":"600",color:"#111827","margin-bottom":"24px"}},J={key:0},P=["value"],$={style:{display:"flex",gap:"12px"}},Q=["disabled"],W={key:1},X={key:0,style:{display:"flex","flex-direction":"column",gap:"12px"}},Z={style:{"font-weight":"500"}},ee={style:{"font-weight":"bold",color:"#ef4444"}},te={key:1,style:{"text-align":"center",padding:"24px",color:"#6b7280"}},ae=v(e({__name:"BudgetTrackerView",setup(e){const v=t(!1),ae=t(!1),le=t([]),ie=t([]),oe=t({total_income:0,total_expense:0,balance:0,expenses_by_category:[]}),re=t((new Date).getMonth()+1),ne=t((new Date).getFullYear()),de=a({type:"expense",budget_category_id:null,title:"",amount:null,entry_date:(new Date).toISOString().split("T")[0],description:""}),se=[{value:1,label:"Ocak"},{value:2,label:"Şubat"},{value:3,label:"Mart"},{value:4,label:"Nisan"},{value:5,label:"Mayıs"},{value:6,label:"Haziran"},{value:7,label:"Temmuz"},{value:8,label:"Ağustos"},{value:9,label:"Eylül"},{value:10,label:"Ekim"},{value:11,label:"Kasım"},{value:12,label:"Aralık"}],pe=Array.from({length:5},(e,t)=>(new Date).getFullYear()-2+t),ue=l(()=>ie.value.filter(e=>e.type===de.type)),ye=e=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),ce=async()=>{try{const e=await m.get("/budget/entries",{params:{month:re.value,year:ne.value}});e.data.success&&(le.value=e.data.data)}catch(e){console.error("Entries loading error:",e)}},be=async()=>{try{const e=await m.get("/budget/stats",{params:{month:re.value,year:ne.value}});e.data.success&&(oe.value=e.data.data)}catch(e){console.error("Stats loading error:",e)}},ge=async()=>{await Promise.all([ce(),be()])},xe=async()=>{v.value=!0;try{(await m.post("/budget/entries",de)).data.success&&(ae.value=!1,Object.assign(de,{type:"expense",budget_category_id:null,title:"",amount:null,entry_date:(new Date).toISOString().split("T")[0],description:""}),await ge())}catch(e){console.error("Add entry error:",e),alert("Kayıt eklenirken hata oluştu!")}finally{v.value=!1}};return i(async()=>{await(async()=>{try{const e=await m.get("/budget/categories");e.data.success&&(ie.value=e.data.data)}catch(e){console.error("Categories loading error:",e)}})(),await ge()}),(e,t)=>(x(),o("div",f,[r("div",h,[t[25]||(t[25]=r("div",{style:{"text-align":"center","margin-bottom":"48px"}},[r("h1",{style:{"font-size":"2.5rem","font-weight":"bold",color:"#111827","margin-bottom":"16px"}},"💰 Bütçe Takibi"),r("p",{style:{"font-size":"1.125rem",color:"#6b7280"}},"Gelir ve giderlerinizi takip edin, bütçenizi kontrol altında tutun")],-1)),r("div",w,[r("div",k,[r("div",z,[r("div",null,[t[10]||(t[10]=r("div",{style:{"font-size":"0.875rem",opacity:"0.9","margin-bottom":"4px"}},"Toplam Gelir",-1)),r("div",_,n(ye(oe.value.total_income)),1)]),t[11]||(t[11]=r("div",{style:{"font-size":"2.5rem"}},"📈",-1))])]),r("div",T,[r("div",D,[r("div",null,[t[12]||(t[12]=r("div",{style:{"font-size":"0.875rem",opacity:"0.9","margin-bottom":"4px"}},"Toplam Gider",-1)),r("div",C,n(ye(oe.value.total_expense)),1)]),t[13]||(t[13]=r("div",{style:{"font-size":"2.5rem"}},"📉",-1))])]),r("div",{style:d({background:oe.value.balance>=0?"linear-gradient(135deg, #3b82f6, #1d4ed8)":"linear-gradient(135deg, #f59e0b, #d97706)",color:"white",padding:"24px",borderRadius:"16px",boxShadow:oe.value.balance>=0?"0 10px 25px rgba(59, 130, 246, 0.3)":"0 10px 25px rgba(245, 158, 11, 0.3)"})},[r("div",K,[r("div",null,[t[14]||(t[14]=r("div",{style:{"font-size":"0.875rem",opacity:"0.9","margin-bottom":"4px"}},"Net Bakiye",-1)),r("div",j,n(ye(oe.value.balance)),1)]),r("div",V,n(oe.value.balance>=0?"💰":"⚠️"),1)])],4)]),r("div",S,[r("div",U,[r("div",B,[t[15]||(t[15]=r("h2",{style:{"font-size":"1.5rem","font-weight":"600",color:"#111827"}},"📋 Kayıtlar",-1)),r("button",{onClick:t[0]||(t[0]=e=>ae.value=!0),style:{background:"linear-gradient(135deg, #ec4899, #8b5cf6)",color:"white",padding:"12px 24px","border-radius":"12px",border:"none",cursor:"pointer","font-weight":"600"}}," ➕ Yeni Kayıt ")]),r("div",F,[s(r("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>re.value=e),onChange:ge,style:{padding:"8px 12px",border:"2px solid #e5e7eb","border-radius":"8px"}},[(x(),o(u,null,y(se,e=>r("option",{key:e.value,value:e.value},n(e.label),9,q)),64))],544),[[p,re.value]]),s(r("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>ne.value=e),onChange:ge,style:{padding:"8px 12px",border:"2px solid #e5e7eb","border-radius":"8px"}},[(x(!0),o(u,null,y(c(pe),e=>(x(),o("option",{key:e,value:e},n(e),9,A))),128))],544),[[p,ne.value]])]),le.value.length?(x(),o("div",G,[(x(!0),o(u,null,y(le.value,e=>{return x(),o("div",{key:e.id,style:d([{display:"flex","align-items":"center","justify-content":"space-between",padding:"16px",background:"#f8fafc","border-radius":"12px","border-left":"4px solid"},{borderLeftColor:e.category.color}])},[r("div",I,[r("div",Y,n(e.category.icon),1),r("div",null,[r("div",L,n(e.title),1),r("div",M,n(e.category.name)+" • "+n((t=e.entry_date,new Date(t).toLocaleDateString("tr-TR"))),1)])]),r("div",O,[r("div",{style:d([{"font-weight":"bold","font-size":"1.125rem"},{color:"income"===e.type?"#10b981":"#ef4444"}])},n("income"===e.type?"+":"-")+n(ye(e.amount)),5),r("button",{onClick:t=>(async e=>{if(confirm("Bu kaydı silmek istediğinizden emin misiniz?"))try{await m.delete(`/budget/entries/${e}`),await ge()}catch(t){console.error("Delete entry error:",t),alert("Kayıt silinirken hata oluştu!")}})(e.id),style:{color:"#ef4444",background:"none",border:"none",cursor:"pointer",padding:"4px"}},"🗑️",8,R)])],4);var t}),128))])):(x(),o("div",E,t[16]||(t[16]=[r("div",{style:{"font-size":"3rem","margin-bottom":"16px"}},"📊",-1),r("div",null,"Henüz kayıt yok. İlk kaydınızı ekleyin!",-1)])))]),r("div",N,[r("h3",H,n(ae.value?"➕ Yeni Kayıt":"📊 Kategori Dağılımı"),1),ae.value?(x(),o("div",J,[r("form",{onSubmit:b(xe,["prevent"]),style:{display:"flex","flex-direction":"column",gap:"16px"}},[r("div",null,[t[18]||(t[18]=r("label",{style:{display:"block","font-size":"0.875rem","font-weight":"500",color:"#374151","margin-bottom":"8px"}},"Tür",-1)),s(r("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>de.type=e),required:"",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb","border-radius":"8px"}},t[17]||(t[17]=[r("option",{value:"income"},"💰 Gelir",-1),r("option",{value:"expense"},"💸 Gider",-1)]),512),[[p,de.type]])]),r("div",null,[t[19]||(t[19]=r("label",{style:{display:"block","font-size":"0.875rem","font-weight":"500",color:"#374151","margin-bottom":"8px"}},"Kategori",-1)),s(r("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>de.budget_category_id=e),required:"",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb","border-radius":"8px"}},[(x(!0),o(u,null,y(ue.value,e=>(x(),o("option",{key:e.id,value:e.id},n(e.icon)+" "+n(e.name),9,P))),128))],512),[[p,de.budget_category_id]])]),r("div",null,[t[20]||(t[20]=r("label",{style:{display:"block","font-size":"0.875rem","font-weight":"500",color:"#374151","margin-bottom":"8px"}},"Başlık",-1)),s(r("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>de.title=e),type:"text",required:"",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb","border-radius":"8px"},placeholder:"Örn: Market alışverişi"},null,512),[[g,de.title]])]),r("div",null,[t[21]||(t[21]=r("label",{style:{display:"block","font-size":"0.875rem","font-weight":"500",color:"#374151","margin-bottom":"8px"}},"Tutar (TL)",-1)),s(r("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>de.amount=e),type:"number",step:"0.01",required:"",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb","border-radius":"8px"},placeholder:"0.00"},null,512),[[g,de.amount,void 0,{number:!0}]])]),r("div",null,[t[22]||(t[22]=r("label",{style:{display:"block","font-size":"0.875rem","font-weight":"500",color:"#374151","margin-bottom":"8px"}},"Tarih",-1)),s(r("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>de.entry_date=e),type:"date",required:"",style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb","border-radius":"8px"}},null,512),[[g,de.entry_date]])]),r("div",null,[t[23]||(t[23]=r("label",{style:{display:"block","font-size":"0.875rem","font-weight":"500",color:"#374151","margin-bottom":"8px"}},"Açıklama",-1)),s(r("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>de.description=e),style:{width:"100%",padding:"12px",border:"2px solid #e5e7eb","border-radius":"8px",resize:"vertical"},rows:"3",placeholder:"İsteğe bağlı açıklama"},null,512),[[g,de.description]])]),r("div",$,[r("button",{type:"submit",disabled:v.value,style:{flex:"1",background:"linear-gradient(135deg, #10b981, #059669)",color:"white",padding:"12px","border-radius":"8px",border:"none",cursor:"pointer","font-weight":"600"}},n(v.value?"⏳ Kaydediliyor...":"✅ Kaydet"),9,Q),r("button",{type:"button",onClick:t[9]||(t[9]=e=>ae.value=!1),style:{background:"#6b7280",color:"white",padding:"12px 16px","border-radius":"8px",border:"none",cursor:"pointer"}},"❌")])],32)])):(x(),o("div",W,[oe.value.expenses_by_category?.length?(x(),o("div",X,[(x(!0),o(u,null,y(oe.value.expenses_by_category,e=>(x(),o("div",{key:e.category,style:d([{display:"flex","align-items":"center","justify-content":"space-between",padding:"12px",background:"#f8fafc","border-radius":"8px","border-left":"4px solid"},{borderLeftColor:e.color}])},[r("div",Z,n(e.category),1),r("div",ee,n(ye(e.total)),1)],4))),128))])):(x(),o("div",te,t[24]||(t[24]=[r("div",{style:{"font-size":"2rem","margin-bottom":"8px"}},"📊",-1),r("div",null,"Bu ay henüz gider yok",-1)])))]))])])])]))}}),[["__scopeId","data-v-c42c2d75"]]);export{ae as default};
