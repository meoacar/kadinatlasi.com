import{u as s,a,_ as e}from"./index-5thJkCkA.js";import{f as t,r,g as i,b as l,e as c,i as n,F as o,k as u,t as d,m as v,j as m,l as y,w as p,v as k,G as g,o as h}from"./vendor-By8KxUP1.js";const _={class:"courses-page"},b={class:"courses-section"},f={class:"container"},w={key:0,class:"loading-state"},$={key:1,class:"courses-grid"},z={class:"course-image"},K=["src","alt"],C={class:"course-level"},j={class:"course-content"},x={class:"course-category"},A={class:"course-title"},E={class:"course-description"},G={class:"course-meta"},O={class:"instructor"},P={class:"duration"},q={class:"course-stats"},B={class:"enrollment-count"},D={key:0,class:"rating"},F={class:"course-footer"},H={class:"price"},I={class:"course-actions"},L=["onClick","disabled"],M={key:2,class:"empty-state"},R=e(t({__name:"CoursesView",setup(e){const t=s(),R=g(),U=r([]),V=r(!0),Y=r(!1),J=r(null),N=r(!1),Q=async()=>{try{const s=await a.get("/courses");s.data.success&&(U.value=s.data.courses)}catch(s){console.error("Courses loading error:",s)}finally{V.value=!1}},S=async s=>{Y.value=!0;try{(await a.post(`/courses/${s}/enroll`)).data.success&&(alert("Kursa başarıyla kaydoldunuz!"),await Q())}catch(e){console.error("Enrollment error:",e);const s=e.response?.data;if(s?.requires_premium){confirm(s.message+"\n\nPremium üyeliğe yükseltmek ister misiniz?")&&R.push("/premium")}else{alert(s?.message||"Kayıt işlemi sırasında bir hata oluştu!")}}finally{Y.value=!1}},T=s=>{const a=Math.floor(s/60),e=s%60;return a>0?`${a}s ${e}dk`:`${e} dakika`};return i(()=>{Q(),(async()=>{if(t.isAuthenticated)try{if(N.value="admin@kadinatlasi.com"===t.user?.email,!N.value){const s=await a.get("/premium/subscription");s.data.success&&(J.value=s.data.subscription)}}catch(s){console.error("Premium status check error:",s)}})()}),(s,a)=>{const e=k("RouterLink");return h(),l("div",_,[a[8]||(a[8]=c("section",{class:"hero-section"},[c("div",{class:"hero-content"},[c("h1",{class:"hero-title"},"📚 Eğitim & Atölyeler"),c("p",{class:"hero-subtitle"},"Uzmanlardan öğrenin, kendinizi geliştirin")])],-1)),c("section",b,[c("div",f,[V.value?(h(),l("div",w,a[0]||(a[0]=[c("div",{class:"spinner"},null,-1),c("p",null,"Kurslar yükleniyor...",-1)]))):(h(),l("div",$,[(h(!0),l(o,null,u(U.value,s=>{return h(),l("div",{key:s.id,class:"course-card"},[c("div",z,[c("img",{src:s.image_url||"https://via.placeholder.com/400x250",alt:s.title},null,8,K),c("div",C,d((r=s.level,{beginner:"Başlangıç",intermediate:"Orta",advanced:"İleri"}[r]||r)),1)]),c("div",j,[c("div",x,d(s.category),1),c("h3",A,d(s.title),1),c("p",E,d(s.description),1),c("div",G,[c("div",O,[a[1]||(a[1]=c("span",{class:"instructor-icon"},"👩‍🏫",-1)),v(" "+d(s.instructor_name),1)]),c("div",P,[a[2]||(a[2]=c("span",{class:"duration-icon"},"⏱️",-1)),v(" "+d(T(s.duration)),1)])]),c("div",q,[c("div",B,[a[3]||(a[3]=c("span",{class:"stats-icon"},"👥",-1)),v(" "+d(s.enrollment_count)+" kayıt ",1)]),s.rating>0?(h(),l("div",D,[a[4]||(a[4]=c("span",{class:"rating-icon"},"⭐",-1)),v(" "+d(s.rating),1)])):n("",!0)]),c("div",F,[c("div",H,"₺"+d(s.price),1),c("div",I,[m(e,{to:`/courses/${s.id}`,class:"detail-btn"},{default:p(()=>a[5]||(a[5]=[v(" Detay ",-1)])),_:2,__:[5]},1032,["to"]),s.is_enrolled?(h(),y(e,{key:0,to:`/courses/${s.id}`,class:"enter-btn"},{default:p(()=>a[6]||(a[6]=[v(" Kursa Gir ",-1)])),_:2,__:[6]},1032,["to"])):(h(),l("button",{key:1,onClick:a=>(async s=>{t.isAuthenticated?await S(s):R.push("/login")})(s.id),class:"enroll-btn",disabled:Y.value},d(Y.value?"İşleniyor...":"Kayıt Ol"),9,L))])])])]);var r}),128))])),V.value||0!==U.value.length?n("",!0):(h(),l("div",M,a[7]||(a[7]=[c("div",{class:"empty-icon"},"📚",-1),c("h3",null,"Henüz kurs bulunmuyor",-1),c("p",null,"Yakında yeni kurslar eklenecek!",-1)])))])])])}}}),[["__scopeId","data-v-838e1223"]]);export{R as default};
