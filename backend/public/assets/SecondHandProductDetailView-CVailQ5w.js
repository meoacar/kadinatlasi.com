import{f as e,r as t,J as i,c as a,g as r,K as o,G as l,b as n,e as d,i as s,F as p,k as c,t as u,s as g,x as y,C as m,D as x,o as f}from"./vendor-By8KxUP1.js";import{u as b,a as v}from"./index-5thJkCkA.js";const h={style:{"min-height":"100vh",background:"linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%)",padding:"32px 0"}},k={style:{"max-width":"1152px",margin:"0 auto",padding:"0 16px"}},w={key:0,style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"32px","margin-bottom":"32px"}},z={style:{background:"white","border-radius":"16px",overflow:"hidden","margin-bottom":"16px"}},_={style:{height:"400px",position:"relative"}},j=["src"],C={key:1,style:{display:"flex","align-items":"center","justify-content":"center",width:"100%",height:"100%",background:"#f3f4f6"}},D={key:2,style:{position:"absolute",bottom:"16px",left:"50%",transform:"translateX(-50%)",display:"flex",gap:"8px"}},$=["onClick"],S={key:0,style:{display:"grid","grid-template-columns":"repeat(4, 1fr)",gap:"8px"}},M=["onClick"],A=["src"],G={style:{background:"white","border-radius":"16px",padding:"24px"}},K={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"16px"}},P={style:{"font-size":"1.5rem","font-weight":"bold",color:"#1f2937",margin:"0"}},R={style:{display:"flex","align-items":"center",gap:"12px","margin-bottom":"16px"}},U={style:{"font-size":"2rem","font-weight":"bold",color:"#ea580c"}},V={key:0,style:{"font-size":"1rem",color:"#6b7280","text-decoration":"line-through"}},F={key:1,style:{background:"#dc2626",color:"white",padding:"4px 8px","border-radius":"6px","font-size":"0.75rem","font-weight":"bold"}},H={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"16px","margin-bottom":"24px",padding:"16px",background:"#f9fafb","border-radius":"8px"}},T={style:{"font-weight":"600",color:"#1f2937"}},L={style:{"font-weight":"600",color:"#1f2937"}},W={style:{"font-weight":"600",color:"#1f2937"}},q={style:{"font-weight":"600",color:"#1f2937"}},J={style:{"margin-bottom":"24px"}},O={style:{color:"#6b7280","line-height":"1.6"}},X={style:{display:"flex","align-items":"center","justify-content":"space-between",padding:"16px",background:"#f9fafb","border-radius":"8px","margin-bottom":"24px"}},Y={style:{display:"flex","align-items":"center",gap:"12px"}},B={style:{width:"48px",height:"48px",background:"#ea580c","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",color:"white","font-weight":"bold"}},E={style:{"font-weight":"600",color:"#1f2937"}},I={key:0,style:{display:"flex","align-items":"center",gap:"4px","font-size":"0.875rem",color:"#6b7280"}},N={style:{display:"flex",gap:"12px"}},Q={style:{background:"white","border-radius":"16px",padding:"24px","margin-bottom":"32px"}},Z={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"16px"}},ee={style:{"font-size":"1.25rem","font-weight":"bold",color:"#1f2937",margin:"0"}},te={key:0,style:{"text-align":"center",padding:"32px",color:"#6b7280"}},ie={key:1,style:{display:"flex","flex-direction":"column",gap:"16px"}},ae={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"8px"}},re={style:{display:"flex","align-items":"center",gap:"8px"}},oe={style:{width:"32px",height:"32px",background:"#f3f4f6","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center"}},le={style:{"font-weight":"600",color:"#1f2937"}},ne={style:{display:"flex","align-items":"center",gap:"4px"}},de={key:0,style:{color:"#6b7280",margin:"0"}},se={key:1,style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0,0,0,0.5)",display:"flex","align-items":"center","justify-content":"center","z-index":"50"}},pe={style:{background:"white","border-radius":"16px",padding:"24px","max-width":"500px",width:"100%",margin:"16px","max-height":"80vh","overflow-y":"auto"}},ce={style:{"max-height":"300px","overflow-y":"auto","margin-bottom":"16px",padding:"16px",background:"#f9fafb","border-radius":"8px"}},ue={key:0,style:{"text-align":"center",color:"#6b7280",padding:"32px"}},ge={key:1,style:{display:"flex","flex-direction":"column",gap:"12px"}},ye={style:{"font-size":"0.75rem",color:"#6b7280","margin-top":"4px"}},me={style:{display:"flex",gap:"12px"}},xe={key:2,style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0,0,0,0.5)",display:"flex","align-items":"center","justify-content":"center","z-index":"50"}},fe={style:{background:"white","border-radius":"16px",padding:"24px","max-width":"400px",width:"100%",margin:"16px"}},be={style:{display:"flex",gap:"4px"}},ve=["onClick"],he={style:{display:"flex",gap:"12px"}},ke=e({__name:"SecondHandProductDetailView",setup(e){const ke=o(),we=l(),ze=b(),_e=t(null),je=t([]),Ce=t([]),De=t([]),$e=t(0),Se=t(!1),Me=t(!1),Ae=t(""),Ge=i({rating:5,comment:""}),Ke=a(()=>ze.isAuthenticated&&_e.value&&ze.user?.id!==_e.value.user_id),Pe=e=>{const t=De.value.find(t=>t.value===e);return t?t.label:e},Re=e=>!e.original_price||e.original_price<=e.price?0:Math.round((e.original_price-e.price)/e.original_price*100),Ue=e=>e?e.startsWith("http")?e:`http://localhost:8000/storage/${e}`:"",Ve=e=>new Date(e).toLocaleDateString("tr-TR"),Fe=async()=>{if(ze.isAuthenticated)try{const e=await v.post(`/second-hand/${_e.value.id}/favorite`);_e.value.is_favorited=e.data.is_favorited}catch(e){console.error("Favori işlemi başarısız:",e)}else we.push("/login")},He=async()=>{if(Ae.value.trim())try{const e=await v.post(`/second-hand/${_e.value.id}/messages`,{message:Ae.value});Ce.value.push(e.data.data),Ae.value=""}catch(e){console.error("Mesaj gönderilemedi:",e),alert("Mesaj gönderilemedi")}},Te=async()=>{try{const e=await v.post(`/second-hand/${_e.value.id}/review`,Ge);je.value.unshift(e.data.data),Me.value=!1,Ge.rating=5,Ge.comment="",alert("Değerlendirmeniz kaydedildi!")}catch(e){console.error("Değerlendirme kaydedilemedi:",e),alert(e.response?.data?.message||"Değerlendirme kaydedilemedi")}},Le=()=>{we.push(`/ikinci-el-pazar/kullanici/${_e.value.user_id}`)},We=()=>{navigator.share?navigator.share({title:_e.value.title,text:_e.value.description,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Link kopyalandı!"))};return r(async()=>{try{const[e,t,i]=await Promise.all([v.get(`/second-hand/${ke.params.id}`),v.get(`/second-hand/${ke.params.id}/reviews`),v.get("/second-hand/categories")]);_e.value=e.data.data,je.value=t.data.data,De.value=i.data.data,await(async()=>{if(ze.isAuthenticated)try{const e=await v.get(`/second-hand/${ke.params.id}/messages`);Ce.value=e.data.data}catch(e){console.error("Mesajlar yüklenemedi:",e)}})()}catch(e){console.error("Veriler yüklenemedi:",e),we.push("/ikinci-el-pazar")}}),(e,t)=>{return f(),n("div",h,[d("div",k,[d("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{display:"flex","align-items":"center",gap:"8px","margin-bottom":"24px",color:"#ea580c","font-weight":"600",background:"none",border:"none",cursor:"pointer"}}," ← Geri Dön "),_e.value?(f(),n("div",w,[d("div",null,[d("div",z,[d("div",_,[_e.value.images&&_e.value.images.length>0?(f(),n("img",{key:0,src:Ue(_e.value.images[$e.value]),style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,j)):(f(),n("div",C,t[7]||(t[7]=[d("span",{style:{"font-size":"4rem",color:"#9ca3af"}},"📷",-1)]))),_e.value.images&&_e.value.images.length>1?(f(),n("div",D,[(f(!0),n(p,null,c(_e.value.images,(e,t)=>(f(),n("button",{key:t,onClick:e=>$e.value=t,style:g({width:"12px",height:"12px",borderRadius:"50%",border:"none",background:t===$e.value?"#ea580c":"rgba(255,255,255,0.5)",cursor:"pointer"})},null,12,$))),128))])):s("",!0)])]),_e.value.images&&_e.value.images.length>1?(f(),n("div",S,[(f(!0),n(p,null,c(_e.value.images,(e,t)=>(f(),n("div",{key:t,onClick:e=>$e.value=t,style:g({height:"80px",borderRadius:"8px",overflow:"hidden",cursor:"pointer",border:t===$e.value?"2px solid #ea580c":"2px solid transparent"})},[d("img",{src:Ue(e),style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,A)],12,M))),128))])):s("",!0)]),d("div",G,[d("div",K,[d("h1",P,u(_e.value.title),1),d("button",{onClick:Fe,style:g({background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:_e.value.is_favorited?"#dc2626":"#9ca3af"})},u(_e.value.is_favorited?"❤️":"🤍"),5)]),d("div",R,[d("span",U,u(_e.value.price)+" ₺",1),_e.value.original_price>_e.value.price?(f(),n("span",V,u(_e.value.original_price)+" ₺",1)):s("",!0),Re(_e.value)>0?(f(),n("span",F," -%"+u(Re(_e.value)),1)):s("",!0)]),d("div",H,[d("div",null,[t[8]||(t[8]=d("span",{style:{"font-size":"0.875rem",color:"#6b7280"}},"Durum:",-1)),d("div",T,u((i=_e.value.condition,{excellent:"Mükemmel",good:"İyi",fair:"Orta",poor:"Kötü"}[i]||i)),1)]),d("div",null,[t[9]||(t[9]=d("span",{style:{"font-size":"0.875rem",color:"#6b7280"}},"Kategori:",-1)),d("div",L,u(Pe(_e.value.category)),1)]),d("div",null,[t[10]||(t[10]=d("span",{style:{"font-size":"0.875rem",color:"#6b7280"}},"Konum:",-1)),d("div",W,"📍 "+u(_e.value.location),1)]),d("div",null,[t[11]||(t[11]=d("span",{style:{"font-size":"0.875rem",color:"#6b7280"}},"İlan Tarihi:",-1)),d("div",q,u(Ve(_e.value.created_at)),1)])]),d("div",J,[t[12]||(t[12]=d("h3",{style:{"font-weight":"600",color:"#1f2937","margin-bottom":"8px"}},"Açıklama",-1)),d("p",O,u(_e.value.description),1)]),d("div",X,[d("div",Y,[d("div",B,u(_e.value.seller_name.charAt(0).toUpperCase()),1),d("div",null,[d("div",E,u(_e.value.seller_name),1),_e.value.average_rating>0?(f(),n("div",I," ⭐ "+u(_e.value.average_rating.toFixed(1))+" ("+u(_e.value.review_count)+" değerlendirme) ",1)):s("",!0)])]),d("button",{onClick:Le,style:{background:"#f3f4f6",color:"#374151",padding:"8px 16px","border-radius":"6px","font-size":"0.875rem","font-weight":"500",border:"none",cursor:"pointer"}}," Profili Gör ")]),d("div",N,[d("button",{onClick:t[1]||(t[1]=e=>Se.value=!0),style:{flex:"1",background:"#10b981",color:"white",padding:"12px","border-radius":"8px","font-weight":"600",border:"none",cursor:"pointer"}}," 💬 Mesaj Gönder "),d("button",{onClick:We,style:{background:"#6b7280",color:"white",padding:"12px 16px","border-radius":"8px","font-weight":"600",border:"none",cursor:"pointer"}}," 📤 ")])])])):s("",!0),d("div",Q,[d("div",Z,[d("h2",ee," Değerlendirmeler ("+u(je.value.length)+") ",1),Ke.value?(f(),n("button",{key:0,onClick:t[2]||(t[2]=e=>Me.value=!0),style:{background:"#ea580c",color:"white",padding:"8px 16px","border-radius":"6px","font-size":"0.875rem","font-weight":"500",border:"none",cursor:"pointer"}}," Değerlendir ")):s("",!0)]),0===je.value.length?(f(),n("div",te," Henüz değerlendirme yok. İlk değerlendirmeyi siz yapın! ")):(f(),n("div",ie,[(f(!0),n(p,null,c(je.value,e=>(f(),n("div",{key:e.id,style:{padding:"16px",border:"1px solid #e5e7eb","border-radius":"8px"}},[d("div",ae,[d("div",re,[d("div",oe,u(e.reviewer.name.charAt(0).toUpperCase()),1),d("span",le,u(e.reviewer.name),1)]),d("div",ne,[(f(),n(p,null,c(5,t=>d("span",{key:t,style:g({color:t<=e.rating?"#fbbf24":"#e5e7eb"})},"⭐",4)),64))])]),e.comment?(f(),n("p",de,u(e.comment),1)):s("",!0)]))),128))]))]),Se.value?(f(),n("div",se,[d("div",pe,[t[14]||(t[14]=d("h2",{style:{"font-size":"1.25rem","font-weight":"bold",color:"#1f2937","margin-bottom":"16px"}},"Satıcıya Mesaj Gönder",-1)),d("div",ce,[0===Ce.value.length?(f(),n("div",ue," Henüz mesaj yok. İlk mesajı siz gönderin! ")):(f(),n("div",ge,[(f(!0),n(p,null,c(Ce.value,t=>(f(),n("div",{key:t.id,style:g({alignSelf:t.sender_id===e.$store.auth.user?.id?"flex-end":"flex-start",maxWidth:"70%"})},[d("div",{style:g({background:t.sender_id===e.$store.auth.user?.id?"#ea580c":"#e5e7eb",color:t.sender_id===e.$store.auth.user?.id?"white":"#1f2937",padding:"8px 12px",borderRadius:"12px",fontSize:"0.875rem"})},u(t.message),5),d("div",ye,u(t.sender.name)+" - "+u(Ve(t.created_at)),1)],4))),128))]))]),d("form",{onSubmit:y(He,["prevent"]),style:{display:"flex","flex-direction":"column",gap:"12px"}},[m(d("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>Ae.value=e),placeholder:"Mesajınızı yazın...",required:"",style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb","border-radius":"8px",height:"80px",resize:"vertical"}},null,512),[[x,Ae.value]]),d("div",me,[t[13]||(t[13]=d("button",{type:"submit",style:{flex:"1",background:"#ea580c",color:"white",padding:"12px","border-radius":"8px","font-weight":"600",border:"none",cursor:"pointer"}}," Gönder ",-1)),d("button",{type:"button",onClick:t[4]||(t[4]=e=>Se.value=!1),style:{background:"#6b7280",color:"white",padding:"12px 16px","border-radius":"8px","font-weight":"600",border:"none",cursor:"pointer"}}," İptal ")])],32)])])):s("",!0),Me.value?(f(),n("div",xe,[d("div",fe,[t[18]||(t[18]=d("h2",{style:{"font-size":"1.25rem","font-weight":"bold",color:"#1f2937","margin-bottom":"16px"}},"Ürünü Değerlendir",-1)),d("form",{onSubmit:y(Te,["prevent"]),style:{display:"flex","flex-direction":"column",gap:"16px"}},[d("div",null,[t[15]||(t[15]=d("label",{style:{display:"block","margin-bottom":"8px","font-weight":"600",color:"#374151"}},"Puan",-1)),d("div",be,[(f(),n(p,null,c(5,e=>d("button",{key:e,type:"button",onClick:t=>Ge.rating=e,style:g({background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:e<=Ge.rating?"#fbbf24":"#e5e7eb"})}," ⭐ ",12,ve)),64))])]),d("div",null,[t[16]||(t[16]=d("label",{style:{display:"block","margin-bottom":"8px","font-weight":"600",color:"#374151"}},"Yorum (İsteğe bağlı)",-1)),m(d("textarea",{"onUpdate:modelValue":t[5]||(t[5]=e=>Ge.comment=e),placeholder:"Deneyiminizi paylaşın...",style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb","border-radius":"8px",height:"80px",resize:"vertical"}},null,512),[[x,Ge.comment]])]),d("div",he,[t[17]||(t[17]=d("button",{type:"submit",style:{flex:"1",background:"#ea580c",color:"white",padding:"12px","border-radius":"8px","font-weight":"600",border:"none",cursor:"pointer"}}," Değerlendir ",-1)),d("button",{type:"button",onClick:t[6]||(t[6]=e=>Me.value=!1),style:{background:"#6b7280",color:"white",padding:"12px 16px","border-radius":"8px","font-weight":"600",border:"none",cursor:"pointer"}}," İptal ")])],32)])])):s("",!0)])]);var i}}});export{ke as default};
