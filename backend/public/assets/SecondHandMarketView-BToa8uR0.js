import{f as e,r as t,J as i,c as a,g as o,b as r,e as l,i as n,C as d,I as s,F as p,k as u,q as c,l as g,u as x,w as b,s as y,t as m,m as f,x as h,D as v,v as k,G as w,o as z}from"./vendor-By8KxUP1.js";import{u as _,a as j}from"./index-5thJkCkA.js";const C={style:{"min-height":"100vh",background:"linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%)",padding:"32px 0"}},E={style:{"max-width":"1152px",margin:"0 auto",padding:"0 16px"}},U={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"24px","flex-wrap":"wrap",gap:"16px"}},V={style:{display:"flex",gap:"16px","flex-wrap":"wrap"}},A=["value"],S={style:{display:"flex",gap:"12px"}},M=["disabled"],q={key:0,style:{background:"linear-gradient(135deg, #f0f9ff, #e0f2fe)",border:"1px solid #0ea5e9","border-radius":"12px",padding:"20px","margin-bottom":"24px"}},O={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"12px"}},T={style:{color:"#0369a1","font-weight":"600",margin:"0"}},D={style:{background:"#0ea5e9",color:"white",padding:"4px 12px","border-radius":"20px","font-size":"0.875rem","font-weight":"500"}},F={style:{display:"flex","align-items":"center",gap:"16px"}},K={style:{flex:"1",background:"#e0f2fe","border-radius":"8px",height:"8px",overflow:"hidden"}},B={style:{color:"#0369a1","font-weight":"600","font-size":"0.875rem","white-space":"nowrap"}},$={style:{color:"#0369a1",margin:"8px 0 0 0","font-size":"0.875rem"}},R={style:{display:"grid","grid-template-columns":"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px","margin-bottom":"32px"}},L={style:{background:"white",padding:"20px","border-radius":"12px","text-align":"center","box-shadow":"0 4px 6px rgba(0,0,0,0.1)"}},P={style:{"font-size":"1.5rem","font-weight":"bold",color:"#ea580c"}},W={style:{background:"white",padding:"20px","border-radius":"12px","text-align":"center","box-shadow":"0 4px 6px rgba(0,0,0,0.1)"}},Y={style:{"font-size":"1.5rem","font-weight":"bold",color:"#10b981"}},H={style:{background:"white",padding:"20px","border-radius":"12px","text-align":"center","box-shadow":"0 4px 6px rgba(0,0,0,0.1)"}},G={style:{"font-size":"1.5rem","font-weight":"bold",color:"#3b82f6"}},I={style:{display:"grid","grid-template-columns":"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"}},J={style:{height:"200px",background:"linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%)",display:"flex","align-items":"center","justify-content":"center",position:"relative",overflow:"hidden"}},N=["src"],Q={key:1,style:{display:"flex","align-items":"center","justify-content":"center",width:"100%",height:"100%"}},X={key:2,style:{position:"absolute",top:"12px",left:"12px",background:"#f59e0b",color:"white",padding:"4px 8px","border-radius":"6px","font-size":"0.75rem","font-weight":"bold"}},Z={style:{position:"absolute",top:"12px",right:"12px",background:"rgba(0,0,0,0.7)",color:"white",padding:"4px 8px","border-radius":"6px","font-size":"0.75rem"}},ee={key:3,style:{position:"absolute",top:"12px",left:"12px",background:"#dc2626",color:"white",padding:"4px 8px","border-radius":"6px","font-size":"0.75rem","font-weight":"bold"}},te={style:{padding:"20px"}},ie={style:{"font-weight":"bold",color:"#1f2937","margin-bottom":"8px","font-size":"1.125rem"}},ae={style:{display:"flex","align-items":"center",gap:"8px","margin-bottom":"12px"}},oe={style:{"font-size":"1.5rem","font-weight":"bold",color:"#ea580c"}},re={key:0,style:{"font-size":"0.875rem",color:"#6b7280","text-decoration":"line-through"}},le={style:{display:"flex","align-items":"center","justify-content":"space-between","font-size":"0.875rem",color:"#6b7280","margin-bottom":"16px"}},ne={style:{padding:"4px 8px",background:"#f3f4f6","border-radius":"6px"}},de={style:{"font-size":"0.875rem",color:"#6b7280","margin-bottom":"16px","line-height":"1.4"}},se={key:0,style:{background:"#fef3c7",border:"1px solid #f59e0b","border-radius":"6px",padding:"8px","margin-bottom":"12px","text-align":"center"}},pe={style:{display:"flex","align-items":"center","justify-content":"space-between"}},ue={style:{display:"flex","align-items":"center",gap:"8px"}},ce={style:{"font-size":"0.875rem",color:"#6b7280"}},ge={style:{display:"flex",gap:"8px"}},xe=["onClick"],be=["onClick"],ye={key:1,style:{"text-align":"center",padding:"64px 0"}},me={key:2,style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0,0,0,0.5)",display:"flex","align-items":"center","justify-content":"center","z-index":"50"}},fe={style:{background:"white","border-radius":"16px",padding:"24px","max-width":"500px",width:"100%",margin:"16px","max-height":"90vh","overflow-y":"auto"}},he={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"16px"}},ve=["value"],ke={style:{display:"grid","grid-template-columns":"1fr 1fr",gap:"16px"}},we={key:0,style:{display:"grid","grid-template-columns":"repeat(auto-fit, minmax(100px, 1fr))",gap:"8px","margin-top":"12px"}},ze=["src"],_e={key:0,style:{position:"absolute",top:"4px",left:"4px",background:"#ea580c",color:"white",padding:"2px 6px","border-radius":"4px","font-size":"0.75rem"}},je=["onClick"],Ce={style:{display:"flex",gap:"12px"}},Ee=e({__name:"SecondHandMarketView",setup(e){const Ee=w(),Ue=_(),Ve=t([]),Ae=t([]),Se=t(""),Me=t(""),qe=t(!1),Oe=t(null),Te=i({title:"",price:null,original_price:null,condition:"",category:"",location:"",description:"",seller_phone:""}),De=t([]),Fe=t([]),Ke=a(()=>{let e=Ve.value;return Se.value&&(e=e.filter(e=>e.category===Se.value)),Me.value&&(e=e.filter(e=>e.condition===Me.value)),e}),Be=a(()=>{if(0===Ve.value.length)return 0;const e=Ve.value.reduce((e,t)=>e+Re(t),0);return Math.round(e/Ve.value.length)}),$e=e=>{const t=Ae.value.find(t=>t.value===e);return t?t.label:e},Re=e=>!e.original_price||e.original_price<=e.price?0:Math.round((e.original_price-e.price)/e.original_price*100),Le=()=>{},Pe=e=>{const t=Array.from(e.target.files);t.length>4?alert("En fazla 4 resim y√ºkleyebilirsiniz"):(De.value=t,Fe.value=[],t.forEach(e=>{const t=new FileReader;t.onload=e=>{Fe.value.push(e.target.result)},t.readAsDataURL(e)}))},We=async()=>{await Ye(),!Oe.value||Oe.value.can_create?qe.value=!0:alert(`Bu ay ilan verme limitinizi doldurdunuz. ${Oe.value.membership_type} √ºyeliƒüinizle ayda maksimum ${Oe.value.limit} ilan verebilirsiniz.`)},Ye=async()=>{try{const e=await j.get("/second-hand/limits/user");Oe.value=e.data.data}catch(e){console.error("Limit bilgileri y√ºklenemedi:",e)}},He=async()=>{try{const e=new FormData;Object.keys(Te).forEach(t=>{null!==Te[t]&&""!==Te[t]&&e.append(t,Te[t])}),De.value.forEach((t,i)=>{e.append(`images[${i}]`,t)});const t=await j.post("/second-hand",e,{headers:{"Content-Type":"multipart/form-data"}});Ve.value.unshift(t.data.data),qe.value=!1,Object.keys(Te).forEach(e=>{"string"==typeof Te[e]?Te[e]="":Te[e]=null}),De.value=[],Fe.value=[],await Ye();const i=await j.get("/second-hand");Ve.value=i.data.data,alert("√úr√ºn ba≈üarƒ±yla eklendi!")}catch(e){console.error("√úr√ºn eklenemedi:",e);const t=e.response?.data?.message||"√úr√ºn eklenirken bir hata olu≈ütu.";alert(t)}};return o(async()=>{try{Ue.isAuthenticated&&!Ue.user&&await Ue.fetchUser();const[e,t]=await Promise.all([j.get("/second-hand"),j.get("/second-hand/categories")]);Ve.value=e.data.data,Ae.value=t.data.data,Ue.isAuthenticated&&await Ye()}catch(e){console.error("Veriler y√ºklenemedi:",e)}}),(e,t)=>{const i=k("router-link");return z(),r("div",C,[l("div",E,[t[33]||(t[33]=l("div",{style:{"text-align":"center","margin-bottom":"32px"}},[l("h1",{style:{"font-size":"2rem","font-weight":"bold",color:"#1f2937","margin-bottom":"8px"}},"üõçÔ∏è ƒ∞kinci El √úr√ºn Pazarƒ±"),l("p",{style:{color:"#6b7280"}},"Kaliteli ikinci el √ºr√ºnleri ke≈üfedin ve satƒ±n")],-1)),l("div",U,[l("div",V,[d(l("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>Se.value=e),onChange:Le,style:{padding:"8px 16px",border:"2px solid #e5e7eb","border-radius":"8px",background:"white"}},[t[15]||(t[15]=l("option",{value:""},"T√ºm Kategoriler",-1)),(z(!0),r(p,null,u(Ae.value,e=>(z(),r("option",{key:e.value,value:e.value},m(e.label),9,A))),128))],544),[[s,Se.value]]),d(l("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>Me.value=e),onChange:Le,style:{padding:"8px 16px",border:"2px solid #e5e7eb","border-radius":"8px",background:"white"}},t[16]||(t[16]=[c('<option value="">T√ºm Durumlar</option><option value="excellent">M√ºkemmel</option><option value="good">ƒ∞yi</option><option value="fair">Orta</option><option value="poor">K√∂t√º</option>',5)]),544),[[s,Me.value]])]),l("div",S,[x(Ue).isAuthenticated?(z(),g(i,{key:0,to:"/ikinci-el-pazar/favorilerim",style:{background:"#dc2626",color:"white",padding:"12px 20px","border-radius":"8px","font-weight":"600","text-decoration":"none",display:"flex","align-items":"center",gap:"8px"}},{default:b(()=>t[17]||(t[17]=[f(" ‚ù§Ô∏è Favorilerim ",-1)])),_:1,__:[17]})):n("",!0),l("button",{onClick:We,disabled:Oe.value&&!Oe.value.can_create,style:y({background:Oe.value&&!Oe.value.can_create?"#9ca3af":"#ea580c",color:"white",padding:"12px 24px",borderRadius:"8px",fontWeight:"600",border:"none",cursor:Oe.value&&!Oe.value.can_create?"not-allowed":"pointer",transition:"background 0.2s",opacity:Oe.value&&!Oe.value.can_create?.6:1})},m(Oe.value&&!Oe.value.can_create?"Limit Doldu":"+ √úr√ºn Ekle"),13,M)])]),Oe.value?(z(),r("div",q,[l("div",O,[l("h3",T," üìä "+m(Oe.value.membership_type)+" √úyeliƒüiniz - ƒ∞lan Limitleri ",1),l("span",D,m(Oe.value.month),1)]),l("div",F,[l("div",K,[l("div",{style:y([{background:"#0ea5e9",height:"100%","border-radius":"8px",transition:"width 0.3s","max-width":"100%"},{width:Oe.value.limit>0?Math.min(100,Oe.value.used/Oe.value.limit*100)+"%":"0%"}])},null,4)]),l("span",B,m(Oe.value.used)+" / "+m(Oe.value.limit)+" ilan ",1)]),l("p",$,[f(" Bu ay "+m(Oe.value.remaining)+" ilan hakkƒ±nƒ±z kaldƒ±. ",1),0===Oe.value.remaining?(z(),g(i,{key:0,to:"/premium",style:{color:"#f59e0b","font-weight":"600","text-decoration":"none"}},{default:b(()=>t[18]||(t[18]=[f(" ‚≠ê Premium'a ge√ßin ",-1)])),_:1,__:[18]})):n("",!0)])])):n("",!0),l("div",R,[l("div",L,[l("div",P,m(Ke.value.length),1),t[19]||(t[19]=l("div",{style:{"font-size":"0.875rem",color:"#6b7280"}},"Aktif √úr√ºn",-1))]),l("div",W,[l("div",Y,m(Ae.value.length),1),t[20]||(t[20]=l("div",{style:{"font-size":"0.875rem",color:"#6b7280"}},"Kategori",-1))]),l("div",H,[l("div",G,"%"+m(Be.value),1),t[21]||(t[21]=l("div",{style:{"font-size":"0.875rem",color:"#6b7280"}},"Ortalama ƒ∞ndirim",-1))])]),l("div",I,[(z(!0),r(p,null,u(Ke.value,e=>{return z(),r("div",{key:e.id,style:{background:"white","border-radius":"16px","box-shadow":"0 10px 15px -3px rgba(0, 0, 0, 0.1)",overflow:"hidden",transition:"transform 0.2s, box-shadow 0.2s",cursor:"pointer"},onMouseover:t[3]||(t[3]=e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 20px 25px -5px rgba(0, 0, 0, 0.15)"}),onMouseleave:t[4]||(t[4]=e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 10px 15px -3px rgba(0, 0, 0, 0.1)"})},[l("div",J,[e.images&&e.images.length>0?(z(),r("img",{key:0,src:(a=e.images[0],a?a.startsWith("http")?a:`http://localhost:8000/storage/${a}`:""),style:{width:"100%",height:"100%","object-fit":"cover"},onError:t[2]||(t[2]=e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="flex"})},null,40,N)):(z(),r("div",Q,t[22]||(t[22]=[l("span",{style:{"font-size":"3rem",color:"#9ca3af"}},"üì∑",-1)]))),"pending"===e.status?(z(),r("div",X," ‚è≥ Onay Bekliyor ")):n("",!0),l("div",Z,m($e(e.category)),1),Re(e)>0?(z(),r("div",ee," -%"+m(Re(e)),1)):n("",!0)]),l("div",te,[l("h3",ie,m(e.title),1),l("div",ae,[l("span",oe,m(e.price)+" ‚Ç∫",1),e.original_price>e.price?(z(),r("span",re,m(e.original_price)+" ‚Ç∫",1)):n("",!0)]),l("div",le,[l("span",ne,m((i=e.condition,{excellent:"M√ºkemmel",good:"ƒ∞yi",fair:"Orta",poor:"K√∂t√º"}[i]||i)),1),l("span",null,"üìç "+m(e.location),1)]),l("p",de,m(e.description),1),"pending"===e.status?(z(),r("div",se,t[23]||(t[23]=[l("span",{style:{color:"#92400e","font-size":"0.875rem","font-weight":"600"}},"‚è≥ Admin onayƒ± bekleniyor",-1)]))):n("",!0),l("div",pe,[l("div",ue,[t[24]||(t[24]=l("div",{style:{width:"32px",height:"32px",background:"#f3f4f6","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center"}}," üë§ ",-1)),l("span",ce,m(e.seller_name),1)]),l("div",ge,["active"===e.status?(z(),r("button",{key:0,onClick:t=>(async e=>{if(Ue.isAuthenticated)try{const t=await j.post(`/second-hand/${e.id}/favorite`);e.is_favorited=t.data.is_favorited}catch(t){console.error("Favori i≈ülemi ba≈üarƒ±sƒ±z:",t)}else Ee.push("/login")})(e),style:y({background:"none",border:"none",fontSize:"1.25rem",cursor:"pointer",color:e.is_favorited?"#dc2626":"#9ca3af"})},m(e.is_favorited?"‚ù§Ô∏è":"ü§ç"),13,xe)):n("",!0),l("button",{onClick:t=>(e=>{Ee.push(`/ikinci-el-pazar/urun/${e.id}`)})(e),style:y({background:"pending"===e.status?"#9ca3af":"#f97316",color:"white",padding:"8px 16px",borderRadius:"6px",fontSize:"0.875rem",fontWeight:"500",border:"none",cursor:"pointer"})},m("pending"===e.status?"Beklemede":"Detay"),13,be)])])])],32);var i,a}),128))]),0===Ke.value.length?(z(),r("div",ye,[t[25]||(t[25]=l("div",{style:{"font-size":"4rem","margin-bottom":"16px"}},"üõçÔ∏è",-1)),t[26]||(t[26]=l("h3",{style:{"font-size":"1.25rem","font-weight":"bold",color:"#1f2937","margin-bottom":"8px"}},"Hen√ºz √úr√ºn Yok",-1)),t[27]||(t[27]=l("p",{style:{color:"#6b7280","margin-bottom":"24px"}},"Bu kategoride hen√ºz √ºr√ºn bulunmuyor. ƒ∞lk √ºr√ºn√º siz ekleyin!",-1)),l("button",{onClick:t[5]||(t[5]=e=>qe.value=!0),style:{background:"#ea580c",color:"white",padding:"12px 24px","border-radius":"8px","font-weight":"600",border:"none",cursor:"pointer"}}," ƒ∞lk √úr√ºn√º Ekle ")])):n("",!0),qe.value?(z(),r("div",me,[l("div",fe,[t[32]||(t[32]=l("h2",{style:{"font-size":"1.25rem","font-weight":"bold",color:"#1f2937","margin-bottom":"16px"}},"√úr√ºn Ekle",-1)),l("form",{onSubmit:h(He,["prevent"]),style:{display:"flex","flex-direction":"column",gap:"16px"}},[d(l("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>Te.title=e),placeholder:"√úr√ºn Ba≈ülƒ±ƒüƒ±",required:"",style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb","border-radius":"8px"}},null,512),[[v,Te.title]]),l("div",he,[d(l("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>Te.price=e),type:"number",placeholder:"Satƒ±≈ü Fiyatƒ±",required:"",style:{padding:"12px 16px",border:"2px solid #e5e7eb","border-radius":"8px"}},null,512),[[v,Te.price,void 0,{number:!0}]]),d(l("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>Te.original_price=e),type:"number",placeholder:"Orijinal Fiyat",required:"",style:{padding:"12px 16px",border:"2px solid #e5e7eb","border-radius":"8px"}},null,512),[[v,Te.original_price,void 0,{number:!0}]])]),d(l("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>Te.condition=e),required:"",style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb","border-radius":"8px",background:"white"}},t[28]||(t[28]=[c('<option value="">Durum Se√ßin</option><option value="excellent">M√ºkemmel</option><option value="good">ƒ∞yi</option><option value="fair">Orta</option><option value="poor">K√∂t√º</option>',5)]),512),[[s,Te.condition]]),d(l("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>Te.category=e),required:"",style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb","border-radius":"8px",background:"white"}},[t[29]||(t[29]=l("option",{value:""},"Kategori Se√ßin",-1)),(z(!0),r(p,null,u(Ae.value,e=>(z(),r("option",{key:e.value,value:e.value},m(e.label),9,ve))),128))],512),[[s,Te.category]]),l("div",ke,[d(l("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>Te.location=e),placeholder:"≈ûehir",required:"",style:{padding:"12px 16px",border:"2px solid #e5e7eb","border-radius":"8px"}},null,512),[[v,Te.location]]),d(l("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>Te.seller_phone=e),placeholder:"Telefon (ƒ∞steƒüe baƒülƒ±)",style:{padding:"12px 16px",border:"2px solid #e5e7eb","border-radius":"8px"}},null,512),[[v,Te.seller_phone]])]),d(l("textarea",{"onUpdate:modelValue":t[13]||(t[13]=e=>Te.description=e),placeholder:"√úr√ºn A√ßƒ±klamasƒ±",required:"",style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb","border-radius":"8px",height:"80px",resize:"vertical"}},null,512),[[v,Te.description]]),l("div",null,[t[30]||(t[30]=l("label",{style:{display:"block","margin-bottom":"8px","font-weight":"600",color:"#374151"}},"√úr√ºn Resimleri (En fazla 4 adet)",-1)),l("input",{type:"file",onChange:Pe,multiple:"",accept:"image/*",style:{width:"100%",padding:"12px 16px",border:"2px solid #e5e7eb","border-radius":"8px",background:"white"}},null,32),Fe.value.length>0?(z(),r("div",we,[(z(!0),r(p,null,u(Fe.value,(e,t)=>(z(),r("div",{key:t,style:{position:"relative","border-radius":"8px",overflow:"hidden","aspect-ratio":"1"}},[l("img",{src:e,style:{width:"100%",height:"100%","object-fit":"cover"}},null,8,ze),0===t?(z(),r("div",_e,"Ana")):n("",!0),l("button",{onClick:e=>(e=>{De.value.splice(e,1),Fe.value.splice(e,1)})(t),type:"button",style:{position:"absolute",top:"4px",right:"4px",background:"rgba(0,0,0,0.7)",color:"white",border:"none","border-radius":"50%",width:"24px",height:"24px",cursor:"pointer","font-size":"0.75rem"}},"√ó",8,je)]))),128))])):n("",!0)]),l("div",Ce,[t[31]||(t[31]=l("button",{type:"submit",style:{flex:"1",background:"#ea580c",color:"white",padding:"12px","border-radius":"8px","font-weight":"600",border:"none",cursor:"pointer"}}," √úr√ºn√º Ekle ",-1)),l("button",{type:"button",onClick:t[14]||(t[14]=e=>qe.value=!1),style:{flex:"1",background:"#6b7280",color:"white",padding:"12px","border-radius":"8px","font-weight":"600",border:"none",cursor:"pointer"}}," ƒ∞ptal ")])],32)])])):n("",!0)])])}}});export{Ee as default};
